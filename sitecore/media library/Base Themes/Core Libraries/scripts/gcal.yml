---
ID: "068b44fc-9681-4904-8d2d-e3c4fdd7ec8e"
Parent: "e3fbf2bd-14b5-439f-b488-478701f1bae1"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: /sitecore/media library/Base Themes/Core Libraries/scripts/gcal
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/068B44FC968149048D2DE3C4FDD7EC8E.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  Value: LyohCiAqIEZ1bGxDYWxlbmRhciB2My44LjEKICogRG9jcyAmIExpY2Vuc2U6IGh0dHBzOi8vZnVsbGNhbGVuZGFyLmlvLwogKiAoYykgMjAxNyBBZGFtIFNoYXcKICovCihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7CglpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpCgkJbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoImZ1bGxjYWxlbmRhciIpLCByZXF1aXJlKCJqcXVlcnkiKSk7CgllbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkKCQlkZWZpbmUoWyJmdWxsY2FsZW5kYXIiLCAianF1ZXJ5Il0sIGZhY3RvcnkpOwoJZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpCgkJZmFjdG9yeShyZXF1aXJlKCJmdWxsY2FsZW5kYXIiKSwgcmVxdWlyZSgianF1ZXJ5IikpOwoJZWxzZQoJCWZhY3Rvcnkocm9vdFsiRnVsbENhbGVuZGFyIl0sIHJvb3RbImpRdWVyeSJdKTsKfSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXykgewpyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCi8qKioqKiovIAkJaWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHsKLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7Ci8qKioqKiovIAkJfQovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlpOiBtb2R1bGVJZCwKLyoqKioqKi8gCQkJbDogZmFsc2UsCi8qKioqKiovIAkJCWV4cG9ydHM6IHt9Ci8qKioqKiovIAkJfTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCi8qKioqKiovIAkJbW9kdWxlLmwgPSB0cnVlOwovKioqKioqLwovKioqKioqLyAJCS8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlCi8qKioqKiovIAkJcmV0dXJuIG1vZHVsZS5leHBvcnRzOwovKioqKioqLyAJfQovKioqKioqLwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlczsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0cwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7Ci8qKioqKiovIAkJaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgewovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgewovKioqKioqLyAJCQkJY29uZmlndXJhYmxlOiBmYWxzZSwKLyoqKioqKi8gCQkJCWVudW1lcmFibGU6IHRydWUsCi8qKioqKiovIAkJCQlnZXQ6IGdldHRlcgovKioqKioqLyAJCQl9KTsKLyoqKioqKi8gCQl9Ci8qKioqKiovIAl9OwovKioqKioqLwovKioqKioqLyAJLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkgewovKioqKioqLyAJCXZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgPwovKioqKioqLyAJCQlmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOgovKioqKioqLyAJCQlmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9OwovKioqKioqLyAJCV9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTsKLyoqKioqKi8gCQlyZXR1cm4gZ2V0dGVyOwovKioqKioqLyAJfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbAovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9OwovKioqKioqLwovKioqKioqLyAJLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ucCA9ICIiOwovKioqKioqLwovKioqKioqLyAJLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzCi8qKioqKiovIAlyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyNjUpOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoewoKLyoqKi8gMToKLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzFfXzsKCi8qKiovIH0pLAoKLyoqKi8gMjoKLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLyoNCmRlcml2ZWQgZnJvbToNCmh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvdHNsaWIvYmxvYi92MS42LjAvdHNsaWIuanMNCgpvbmx5IGluY2x1ZGUgdGhlIGhlbHBlcnMgd2UgbmVlZCwgdG8ga2VlcCBkb3duIGZpbGVzaXplDQoqLw0KdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwNCiAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8DQogICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKQ0KICAgICAgICBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkNCiAgICAgICAgICAgIGRbcF0gPSBiW3BdOyB9Ow0KZXhwb3J0cy5fX2V4dGVuZHMgPSBmdW5jdGlvbiAoZCwgYikgew0KICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7DQogICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9DQogICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOw0KfTsNCgoKLyoqKi8gfSksCgovKioqLyAyNjU6Ci8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7DQp2YXIgZXhwb3J0SG9va3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOw0KdmFyIEdjYWxFdmVudFNvdXJjZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNjYpOw0KZXhwb3J0SG9va3MuRXZlbnRTb3VyY2VQYXJzZXIucmVnaXN0ZXJDbGFzcyhHY2FsRXZlbnRTb3VyY2VfMS5kZWZhdWx0KTsNCmV4cG9ydEhvb2tzLkdjYWxFdmVudFNvdXJjZSA9IEdjYWxFdmVudFNvdXJjZV8xLmRlZmF1bHQ7DQoKCi8qKiovIH0pLAoKLyoqKi8gMjY2OgovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOw0KdmFyIHRzbGliXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpOw0KdmFyICQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOw0KdmFyIGZ1bGxjYWxlbmRhcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsNCnZhciBHY2FsRXZlbnRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7DQogICAgdHNsaWJfMS5fX2V4dGVuZHMoR2NhbEV2ZW50U291cmNlLCBfc3VwZXIpOw0KICAgIGZ1bmN0aW9uIEdjYWxFdmVudFNvdXJjZSgpIHsNCiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOw0KICAgIH0NCiAgICBHY2FsRXZlbnRTb3VyY2UucGFyc2UgPSBmdW5jdGlvbiAocmF3SW5wdXQsIGNhbGVuZGFyKSB7DQogICAgICAgIHZhciByYXdQcm9wczsNCiAgICAgICAgaWYgKHR5cGVvZiByYXdJbnB1dCA9PT0gJ29iamVjdCcpIHsNCiAgICAgICAgICAgIHJhd1Byb3BzID0gcmF3SW5wdXQ7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJhd0lucHV0ID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgcmF3UHJvcHMgPSB7IHVybDogcmF3SW5wdXQgfTsgLy8gdXJsIHdpbGwgYmUgcGFyc2VkIHdpdGggcGFyc2VHb29nbGVDYWxlbmRhcklkDQogICAgICAgIH0NCiAgICAgICAgaWYgKHJhd1Byb3BzKSB7DQogICAgICAgICAgICByZXR1cm4gZnVsbGNhbGVuZGFyXzEuRXZlbnRTb3VyY2UucGFyc2UuY2FsbCh0aGlzLCByYXdQcm9wcywgY2FsZW5kYXIpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9Ow0KICAgIEdjYWxFdmVudFNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCwgdGltZXpvbmUpIHsNCiAgICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgICAgdmFyIHVybCA9IHRoaXMuYnVpbGRVcmwoKTsNCiAgICAgICAgdmFyIHJlcXVlc3RQYXJhbXMgPSB0aGlzLmJ1aWxkUmVxdWVzdFBhcmFtcyhzdGFydCwgZW5kLCB0aW1lem9uZSk7DQogICAgICAgIHZhciBhamF4U2V0dGluZ3MgPSB0aGlzLmFqYXhTZXR0aW5ncyB8fCB7fTsNCiAgICAgICAgdmFyIG9uU3VjY2VzcyA9IGFqYXhTZXR0aW5ncy5zdWNjZXNzOw0KICAgICAgICBpZiAoIXJlcXVlc3RQYXJhbXMpIHsNCiAgICAgICAgICAgIHJldHVybiBmdWxsY2FsZW5kYXJfMS5Qcm9taXNlLnJlamVjdCgpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuY2FsZW5kYXIucHVzaExvYWRpbmcoKTsNCiAgICAgICAgcmV0dXJuIGZ1bGxjYWxlbmRhcl8xLlByb21pc2UuY29uc3RydWN0KGZ1bmN0aW9uIChvblJlc29sdmUsIG9uUmVqZWN0KSB7DQogICAgICAgICAgICAkLmFqYXgoJC5leHRlbmQoe30sIC8vIGRlc3RpbmF0aW9uDQogICAgICAgICAgICBmdWxsY2FsZW5kYXJfMS5Kc29uRmVlZEV2ZW50U291cmNlLkFKQVhfREVGQVVMVFMsIGFqYXhTZXR0aW5ncywgew0KICAgICAgICAgICAgICAgIHVybDogdXJsLA0KICAgICAgICAgICAgICAgIGRhdGE6IHJlcXVlc3RQYXJhbXMsDQogICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlRGF0YSwgc3RhdHVzLCB4aHIpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJhd0V2ZW50RGVmczsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NSZXM7DQogICAgICAgICAgICAgICAgICAgIF90aGlzLmNhbGVuZGFyLnBvcExvYWRpbmcoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlRGF0YS5lcnJvcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVwb3J0RXJyb3IoJ0dvb2dsZSBDYWxlbmRhciBBUEk6ICcgKyByZXNwb25zZURhdGEuZXJyb3IubWVzc2FnZSwgcmVzcG9uc2VEYXRhLmVycm9yLmVycm9ycyk7DQogICAgICAgICAgICAgICAgICAgICAgICBvblJlamVjdCgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlRGF0YS5pdGVtcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmF3RXZlbnREZWZzID0gX3RoaXMuZ2NhbEl0ZW1zVG9SYXdFdmVudERlZnMocmVzcG9uc2VEYXRhLml0ZW1zLCByZXF1ZXN0UGFyYW1zLnRpbWVab25lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NSZXMgPSBmdWxsY2FsZW5kYXJfMS5hcHBseUFsbChvblN1Y2Nlc3MsIF90aGlzLCBbcmVzcG9uc2VEYXRhLCBzdGF0dXMsIHhocl0pOyAvLyBwYXNzdGhydQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQuaXNBcnJheShzdWNjZXNzUmVzKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd0V2ZW50RGVmcyA9IHN1Y2Nlc3NSZXM7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBvblJlc29sdmUoX3RoaXMucGFyc2VFdmVudERlZnMocmF3RXZlbnREZWZzKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXNUZXh0LCBlcnJvclRocm93bikgew0KICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZXBvcnRFcnJvcignR29vZ2xlIENhbGVuZGFyIG5ldHdvcmsgZmFpbHVyZTogJyArIHN0YXR1c1RleHQsIFt4aHIsIGVycm9yVGhyb3duXSk7DQogICAgICAgICAgICAgICAgICAgIF90aGlzLmNhbGVuZGFyLnBvcExvYWRpbmcoKTsNCiAgICAgICAgICAgICAgICAgICAgb25SZWplY3QoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KSk7DQogICAgICAgIH0pOw0KICAgIH07DQogICAgR2NhbEV2ZW50U291cmNlLnByb3RvdHlwZS5nY2FsSXRlbXNUb1Jhd0V2ZW50RGVmcyA9IGZ1bmN0aW9uIChpdGVtcywgZ2NhbFRpbWV6b25lKSB7DQogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICAgIHJldHVybiBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsNCiAgICAgICAgICAgIHJldHVybiBfdGhpcy5nY2FsSXRlbVRvUmF3RXZlbnREZWYoaXRlbSwgZ2NhbFRpbWV6b25lKTsNCiAgICAgICAgfSk7DQogICAgfTsNCiAgICBHY2FsRXZlbnRTb3VyY2UucHJvdG90eXBlLmdjYWxJdGVtVG9SYXdFdmVudERlZiA9IGZ1bmN0aW9uIChpdGVtLCBnY2FsVGltZXpvbmUpIHsNCiAgICAgICAgdmFyIHVybCA9IGl0ZW0uaHRtbExpbmsgfHwgbnVsbDsNCiAgICAgICAgLy8gbWFrZSB0aGUgVVJMcyBmb3IgZWFjaCBldmVudCBzaG93IHRpbWVzIGluIHRoZSBjb3JyZWN0IHRpbWV6b25lDQogICAgICAgIGlmICh1cmwgJiYgZ2NhbFRpbWV6b25lKSB7DQogICAgICAgICAgICB1cmwgPSBpbmplY3RRc0NvbXBvbmVudCh1cmwsICdjdHo9JyArIGdjYWxUaW1lem9uZSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGlkOiBpdGVtLmlkLA0KICAgICAgICAgICAgdGl0bGU6IGl0ZW0uc3VtbWFyeSwNCiAgICAgICAgICAgIHN0YXJ0OiBpdGVtLnN0YXJ0LmRhdGVUaW1lIHx8IGl0ZW0uc3RhcnQuZGF0ZSwNCiAgICAgICAgICAgIGVuZDogaXRlbS5lbmQuZGF0ZVRpbWUgfHwgaXRlbS5lbmQuZGF0ZSwNCiAgICAgICAgICAgIHVybDogdXJsLA0KICAgICAgICAgICAgbG9jYXRpb246IGl0ZW0ubG9jYXRpb24sDQogICAgICAgICAgICBkZXNjcmlwdGlvbjogaXRlbS5kZXNjcmlwdGlvbg0KICAgICAgICB9Ow0KICAgIH07DQogICAgR2NhbEV2ZW50U291cmNlLnByb3RvdHlwZS5idWlsZFVybCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIEdjYWxFdmVudFNvdXJjZS5BUElfQkFTRSArICcvJyArDQogICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQodGhpcy5nb29nbGVDYWxlbmRhcklkKSArDQogICAgICAgICAgICAnL2V2ZW50cz9jYWxsYmFjaz0/JzsgLy8ganNvbnANCiAgICB9Ow0KICAgIEdjYWxFdmVudFNvdXJjZS5wcm90b3R5cGUuYnVpbGRSZXF1ZXN0UGFyYW1zID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQsIHRpbWV6b25lKSB7DQogICAgICAgIHZhciBhcGlLZXkgPSB0aGlzLmdvb2dsZUNhbGVuZGFyQXBpS2V5IHx8IHRoaXMuY2FsZW5kYXIub3B0KCdnb29nbGVDYWxlbmRhckFwaUtleScpOw0KICAgICAgICB2YXIgcGFyYW1zOw0KICAgICAgICBpZiAoIWFwaUtleSkgew0KICAgICAgICAgICAgdGhpcy5yZXBvcnRFcnJvcignU3BlY2lmeSBhIGdvb2dsZUNhbGVuZGFyQXBpS2V5LiBTZWUgaHR0cDovL2Z1bGxjYWxlbmRhci5pby9kb2NzL2dvb2dsZV9jYWxlbmRhci8nKTsNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgICAgIC8vIFRoZSBBUEkgZXhwZWN0cyBhbiBJU084NjAxIGRhdGV0aW1lIHdpdGggYSB0aW1lIGFuZCB0aW1lem9uZSBwYXJ0Lg0KICAgICAgICAvLyBTaW5jZSB0aGUgY2FsZW5kYXIncyB0aW1lem9uZSBvZmZzZXQgaXNuJ3QgYWx3YXlzIGtub3duLCByZXF1ZXN0IHRoZSBkYXRlIGluIFVUQyBhbmQgcGFkIGl0IGJ5IGEgZGF5IG9uIGVhY2gNCiAgICAgICAgLy8gc2lkZSwgZ3VhcmFudGVlaW5nIHdlIHdpbGwgcmVjZWl2ZSBhbGwgZXZlbnRzIGluIHRoZSBkZXNpcmVkIHJhbmdlLCBhbGJlaXQgYSBzdXBlcnNldC4NCiAgICAgICAgLy8gLnV0YygpIHdpbGwgc2V0IGEgem9uZSBhbmQgZ2l2ZSBpdCBhIDAwOjAwOjAwIHRpbWUuDQogICAgICAgIGlmICghc3RhcnQuaGFzWm9uZSgpKSB7DQogICAgICAgICAgICBzdGFydCA9IHN0YXJ0LmNsb25lKCkudXRjKCkuYWRkKC0xLCAnZGF5Jyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFlbmQuaGFzWm9uZSgpKSB7DQogICAgICAgICAgICBlbmQgPSBlbmQuY2xvbmUoKS51dGMoKS5hZGQoMSwgJ2RheScpOw0KICAgICAgICB9DQogICAgICAgIHBhcmFtcyA9ICQuZXh0ZW5kKHRoaXMuYWpheFNldHRpbmdzLmRhdGEgfHwge30sIHsNCiAgICAgICAgICAgIGtleTogYXBpS2V5LA0KICAgICAgICAgICAgdGltZU1pbjogc3RhcnQuZm9ybWF0KCksDQogICAgICAgICAgICB0aW1lTWF4OiBlbmQuZm9ybWF0KCksDQogICAgICAgICAgICBzaW5nbGVFdmVudHM6IHRydWUsDQogICAgICAgICAgICBtYXhSZXN1bHRzOiA5OTk5DQogICAgICAgIH0pOw0KICAgICAgICBpZiAodGltZXpvbmUgJiYgdGltZXpvbmUgIT09ICdsb2NhbCcpIHsNCiAgICAgICAgICAgIC8vIHdoZW4gc2VuZGluZyB0aW1lem9uZSBuYW1lcyB0byBHb29nbGUsIG9ubHkgYWNjZXB0cyB1bmRlcnNjb3Jlcywgbm90IHNwYWNlcw0KICAgICAgICAgICAgcGFyYW1zLnRpbWVab25lID0gdGltZXpvbmUucmVwbGFjZSgnICcsICdfJyk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHBhcmFtczsNCiAgICB9Ow0KICAgIEdjYWxFdmVudFNvdXJjZS5wcm90b3R5cGUucmVwb3J0RXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSwgYXBpRXJyb3JPYmpzKSB7DQogICAgICAgIHZhciBjYWxlbmRhciA9IHRoaXMuY2FsZW5kYXI7DQogICAgICAgIHZhciBjYWxlbmRhck9uRXJyb3IgPSBjYWxlbmRhci5vcHQoJ2dvb2dsZUNhbGVuZGFyRXJyb3InKTsNCiAgICAgICAgdmFyIGVycm9yT2JqcyA9IGFwaUVycm9yT2JqcyB8fCBbeyBtZXNzYWdlOiBtZXNzYWdlIH1dOyAvLyB0byBiZSBwYXNzZWQgaW50byBlcnJvciBoYW5kbGVycw0KICAgICAgICBpZiAodGhpcy5nb29nbGVDYWxlbmRhckVycm9yKSB7DQogICAgICAgICAgICB0aGlzLmdvb2dsZUNhbGVuZGFyRXJyb3IuYXBwbHkoY2FsZW5kYXIsIGVycm9yT2Jqcyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGNhbGVuZGFyT25FcnJvcikgew0KICAgICAgICAgICAgY2FsZW5kYXJPbkVycm9yLmFwcGx5KGNhbGVuZGFyLCBlcnJvck9ianMpOw0KICAgICAgICB9DQogICAgICAgIC8vIHByaW50IGVycm9yIHRvIGRlYnVnIGNvbnNvbGUNCiAgICAgICAgZnVsbGNhbGVuZGFyXzEud2Fybi5hcHBseShudWxsLCBbbWVzc2FnZV0uY29uY2F0KGFwaUVycm9yT2JqcyB8fCBbXSkpOw0KICAgIH07DQogICAgR2NhbEV2ZW50U291cmNlLnByb3RvdHlwZS5nZXRQcmltaXRpdmUgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiB0aGlzLmdvb2dsZUNhbGVuZGFySWQ7DQogICAgfTsNCiAgICBHY2FsRXZlbnRTb3VyY2UucHJvdG90eXBlLmFwcGx5TWFudWFsU3RhbmRhcmRQcm9wcyA9IGZ1bmN0aW9uIChyYXdQcm9wcykgew0KICAgICAgICB2YXIgc3VwZXJTdWNjZXNzID0gZnVsbGNhbGVuZGFyXzEuRXZlbnRTb3VyY2UucHJvdG90eXBlLmFwcGx5TWFudWFsU3RhbmRhcmRQcm9wcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICB2YXIgZ29vZ2xlQ2FsZW5kYXJJZCA9IHJhd1Byb3BzLmdvb2dsZUNhbGVuZGFySWQ7DQogICAgICAgIGlmIChnb29nbGVDYWxlbmRhcklkID09IG51bGwgJiYgcmF3UHJvcHMudXJsKSB7DQogICAgICAgICAgICBnb29nbGVDYWxlbmRhcklkID0gcGFyc2VHb29nbGVDYWxlbmRhcklkKHJhd1Byb3BzLnVybCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGdvb2dsZUNhbGVuZGFySWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgdGhpcy5nb29nbGVDYWxlbmRhcklkID0gZ29vZ2xlQ2FsZW5kYXJJZDsNCiAgICAgICAgICAgIHJldHVybiBzdXBlclN1Y2Nlc3M7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH07DQogICAgR2NhbEV2ZW50U291cmNlLnByb3RvdHlwZS5hcHBseU1pc2NQcm9wcyA9IGZ1bmN0aW9uIChyYXdQcm9wcykgew0KICAgICAgICBpZiAoIXRoaXMuYWpheFNldHRpbmdzKSB7DQogICAgICAgICAgICB0aGlzLmFqYXhTZXR0aW5ncyA9IHt9Ow0KICAgICAgICB9DQogICAgICAgICQuZXh0ZW5kKHRoaXMuYWpheFNldHRpbmdzLCByYXdQcm9wcyk7DQogICAgfTsNCiAgICBHY2FsRXZlbnRTb3VyY2UuQVBJX0JBU0UgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vY2FsZW5kYXIvdjMvY2FsZW5kYXJzJzsNCiAgICByZXR1cm4gR2NhbEV2ZW50U291cmNlOw0KfShmdWxsY2FsZW5kYXJfMS5FdmVudFNvdXJjZSkpOw0KZXhwb3J0cy5kZWZhdWx0ID0gR2NhbEV2ZW50U291cmNlOw0KR2NhbEV2ZW50U291cmNlLmRlZmluZVN0YW5kYXJkUHJvcHMoew0KICAgIC8vIG1hbnVhbGx5IHByb2Nlc3MuLi4NCiAgICB1cmw6IGZhbHNlLA0KICAgIGdvb2dsZUNhbGVuZGFySWQ6IGZhbHNlLA0KICAgIC8vIGF1dG9tYXRpY2FsbHkgdHJhbnNmZXIuLi4NCiAgICBnb29nbGVDYWxlbmRhckFwaUtleTogdHJ1ZSwNCiAgICBnb29nbGVDYWxlbmRhckVycm9yOiB0cnVlDQp9KTsNCmZ1bmN0aW9uIHBhcnNlR29vZ2xlQ2FsZW5kYXJJZCh1cmwpIHsNCiAgICB2YXIgbWF0Y2g7DQogICAgLy8gZGV0ZWN0IGlmIHRoZSBJRCB3YXMgc3BlY2lmaWVkIGFzIGEgc2luZ2xlIHN0cmluZy4NCiAgICAvLyB3aWxsIG1hdGNoIGNhbGVuZGFycyBsaWtlICJhc2RmMTIzNEBjYWxlbmRhci5nb29nbGUuY29tIiBpbiBhZGRpdGlvbiB0byBwZXJzb24gZW1haWwgY2FsZW5kYXJzLg0KICAgIGlmICgvXlteXC9dK0AoW15cL1wuXStcLikqKGdvb2dsZXxnb29nbGVtYWlsfGdtYWlsKVwuY29tJC8udGVzdCh1cmwpKSB7DQogICAgICAgIHJldHVybiB1cmw7DQogICAgfQ0KICAgIGVsc2UgaWYgKChtYXRjaCA9IC9eaHR0cHM6XC9cL3d3dy5nb29nbGVhcGlzLmNvbVwvY2FsZW5kYXJcL3YzXC9jYWxlbmRhcnNcLyhbXlwvXSopLy5leGVjKHVybCkpIHx8DQogICAgICAgIChtYXRjaCA9IC9eaHR0cHM/OlwvXC93d3cuZ29vZ2xlLmNvbVwvY2FsZW5kYXJcL2ZlZWRzXC8oW15cL10qKS8uZXhlYyh1cmwpKSkgew0KICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzFdKTsNCiAgICB9DQp9DQovLyBJbmplY3RzIGEgc3RyaW5nIGxpa2UgImFyZz12YWx1ZSIgaW50byB0aGUgcXVlcnlzdHJpbmcgb2YgYSBVUkwNCmZ1bmN0aW9uIGluamVjdFFzQ29tcG9uZW50KHVybCwgY29tcG9uZW50KSB7DQogICAgLy8gaW5qZWN0IGl0IGFmdGVyIHRoZSBxdWVyeXN0cmluZyBidXQgYmVmb3JlIHRoZSBmcmFnbWVudA0KICAgIHJldHVybiB1cmwucmVwbGFjZSgvKFw/Lio/KT8oI3wkKS8sIGZ1bmN0aW9uICh3aG9sZSwgcXMsIGhhc2gpIHsNCiAgICAgICAgcmV0dXJuIChxcyA/IHFzICsgJyYnIDogJz8nKSArIGNvbXBvbmVudCArIGhhc2g7DQogICAgfSk7DQp9DQoKCi8qKiovIH0pLAoKLyoqKi8gMzoKLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXzsKCi8qKiovIH0pCgovKioqKioqLyB9KTsKfSk7
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 12582
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "ba3f86a2-4a1c-4d78-b63d-91c2779c1b5e"
  Hint: __Sortorder
  Value: 1200
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160509T120132Z
