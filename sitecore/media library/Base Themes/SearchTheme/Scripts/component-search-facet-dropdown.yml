---
ID: "34b24332-2fda-4e9a-9c74-867f0901c6cf"
Parent: "dfcbfa5a-2e37-418a-adb7-f411ecae89a9"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Base Themes/SearchTheme/Scripts/component-search-facet-dropdown"
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/34B243322FDA4E9A9C74867F0901C6CF.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  Value: LyoqDQogKiBGYWNldCBkcm9wZG93biBjb21wb25lbnQgZnVuY3Rpb25hbGl0eQ0KICogQG1vZHVsZSBkcm9wZG93bg0KICogQHBhcmFtICB7alF1ZXJ5fSAkIEluc3RhbmNlIG9mIGpRdWVyeQ0KICogQHBhcmFtICB7RG9jdW1lbnR9IGRvY3VtZW50IGRvbSBkb2N1bWVudCBvYmplY3QNCiAqIEByZXR1cm4ge09iamVjdH0gbGlzdCBvZiBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggY29tcG9uZW50IGRyb3Bkb3duDQoqLw0KWEEuY29tcG9uZW50LnNlYXJjaC5mYWNldC5kcm9wZG93biA9IChmdW5jdGlvbiAoJCwgZG9jdW1lbnQpIHsNCg0KICAgICJ1c2Ugc3RyaWN0IjsNCiAgICAvKioNCiAgICAqIFRoaXMgb2JqZWN0IHN0b3JlcyBhbGwgcHVibGljIGFwaSBtZXRob2RzDQogICAgKiBAdHlwZSB7T2JqZWN0LjxNZXRob2RzPn0NCiAgICAqIEBtZW1iZXJPZiBtb2R1bGU6ZHJvcGRvd24NCiAgICAqLw0KICAgIHZhciBhcGkgPSB7fSwNCiAgICAgICAgdXJsSGVscGVyTW9kZWwsDQogICAgICAgIHF1ZXJ5TW9kZWwNCiAgICAvKioNCiAgICAqIEBuYW1lIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duTW9kZWwNCiAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICogQGF1Z21lbnRzIEJhY2tib25lLk1vZGVsDQogICAgKi8NCiAgICB2YXIgRmFjZXREcm9wZG93bk1vZGVsID0gWEEuY29tcG9uZW50LnNlYXJjaC5iYXNlTW9kZWwuZXh0ZW5kKA0KICAgICAgICAvKiogQGxlbmRzIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duTW9kZWwucHJvdG90eXBlICoqLw0KICAgICAgICB7DQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICogRGVmYXVsdCBtb2RlbCBvcHRpb25zDQogICAgICAgICAgICAqIEBkZWZhdWx0DQogICAgICAgICAgICAqLw0KICAgICAgICAgICAgZGVmYXVsdHM6IHsNCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogIjwlIF8uZm9yRWFjaChyZXN1bHRzLCBmdW5jdGlvbihyZXN1bHQpeyIgKw0KICAgICAgICAgICAgICAgICAgICAiJT48b3B0aW9uIGRhdGEtZmFjZXROYW1lPVwiPCU9IHJlc3VsdC5OYW1lICE9PSAnJyA/IGVuY29kZVVSSUNvbXBvbmVudChyZXN1bHQuTmFtZSkgOiAnX2VtcHR5XycgJT5cIiA8JT0gcmVzdWx0LlNlbGVjdGVkICE9PSB1bmRlZmluZWQgPyAnc2VsZWN0ZWQnIDogJycgJT4gPjwlPSByZXN1bHQuTmFtZSAhPT0gJycgPyByZXN1bHQuTmFtZSA6IGVtcHR5VGV4dCAlPiAoPCU9IHJlc3VsdC5Db3VudCAlPik8L29wdGlvbj48JSIgKw0KICAgICAgICAgICAgICAgICAgICAifSk7ICU+IiwNCiAgICAgICAgICAgICAgICBkYXRhUHJvcGVydGllczoge30sDQogICAgICAgICAgICAgICAgYmxvY2tOZXh0UmVxdWVzdDogZmFsc2UsDQogICAgICAgICAgICAgICAgcmVzdWx0RGF0YToge30sDQogICAgICAgICAgICAgICAgb3B0aW9uU2VsZWN0ZWQ6IGZhbHNlLA0KICAgICAgICAgICAgICAgIHNpZzogW10NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIExpc3RlbnMgdG8gY2hhbmdlcyBvbiBmYWNldHMgYW5kIGhhc2gNCiAgICAgICAgICAgICogQGxpc3RlbnMgbW9kdWxlOlhBLmNvbXBvbmVudC5zZWFyY2gudmVudH5ldmVudDpmYWNldC1kYXRhLWxvYWRlZA0KICAgICAgICAgICAgKiBAbGlzdGVucyBtb2R1bGU6WEEuY29tcG9uZW50LnNlYXJjaC52ZW50fmV2ZW50OmZhY2V0LWRhdGEtZmlsdGVyZWQNCiAgICAgICAgICAgICogQGxpc3RlbnMgbW9kdWxlOlhBLmNvbXBvbmVudC5zZWFyY2gudmVudH5ldmVudDpmYWNldC1kYXRhLXBhcnRpYWwtZmlsdGVyZWQNCiAgICAgICAgICAgICogQGxpc3RlbnMgbW9kdWxlOlhBLmNvbXBvbmVudC5zZWFyY2gudmVudH5ldmVudDpoYXNoQ2hhbmdlZA0KICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAvL0V2ZW50IHRvIGdldCBkYXRhIGF0IHRoZSBiZWdpbmluZyBvciB3aGVuIHRoZXJlIGFyZSBubyBoYXNoIHBhcmFtZXRlcnMgaW4gdGhlIHVybCAtIG9uZSByZXF1ZXN0IGZvciBhbGwgY29udHJvbHMNCiAgICAgICAgICAgICAgICBYQS5jb21wb25lbnQuc2VhcmNoLnZlbnQub24oImZhY2V0LWRhdGEtbG9hZGVkIiwgdGhpcy5wcm9jZXNzRGF0YS5iaW5kKHRoaXMpKTsNCg0KICAgICAgICAgICAgICAgIC8vRXZlbnQgdG8gZ2V0IGZpbHRlcmVkIGRhdGENCiAgICAgICAgICAgICAgICBYQS5jb21wb25lbnQuc2VhcmNoLnZlbnQub24oImZhY2V0LWRhdGEtZmlsdGVyZWQiLCB0aGlzLnByb2Nlc3NEYXRhLmJpbmQodGhpcykpOw0KDQogICAgICAgICAgICAgICAgLy9JZiB0aGUgdXJsIGNvbnRhaW5zIGEgaGFzaCwgYW5kIGZhY2V0IG5hbWUgY29udHJvbCBpcyBjbGlja2VkLCB0aGVuIHdlIGhhdmUgdG8gbGlzdGVuIGZvciBwYXJ0aWFsIGZpbHRlcmluZw0KICAgICAgICAgICAgICAgIFhBLmNvbXBvbmVudC5zZWFyY2gudmVudC5vbigiZmFjZXQtZGF0YS1wYXJ0aWFsLWZpbHRlcmVkIiwgdGhpcy5wcm9jZXNzRGF0YS5iaW5kKHRoaXMpKTsNCg0KICAgICAgICAgICAgICAgIC8vRXZlbnQgYWZ0ZXIgY2hhbmdlIG9mIGhhc2gNCiAgICAgICAgICAgICAgICBYQS5jb21wb25lbnQuc2VhcmNoLnZlbnQub24oImhhc2hDaGFuZ2VkIiwgdGhpcy51cGRhdGVDb21wb25lbnQuYmluZCh0aGlzKSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBUb2dnbGUgdmFsdWUgb2YgYmxvY2tOZXh0UmVxdWVzdCB2YXJpYWJsZQ0KICAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duTW9kZWwNCiAgICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93bk1vZGVsI3RvZ2dsZUJsb2NrUmVxdWVzdHMNCiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgdG9nZ2xlQmxvY2tSZXF1ZXN0czogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuZ2V0KCJibG9ja05leHRSZXF1ZXN0Iik7DQogICAgICAgICAgICAgICAgdGhpcy5zZXQodGhpcy5nZXQoImJsb2NrTmV4dFJlcXVlc3QiKSwgIXN0YXRlKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIFByb2Nlc3NlcyBkYXRhIHRoYXQgY29tZXMgYXMgcGFyYW1ldGVyIHVwZGF0ZQ0KICAgICAgICAgICAgICogbW9kZWwgYW5kIHNvcnRzIGZhY2V0cw0KICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgRGF0YSBmcm9tIHNlcnZlciB3aXRoIGZhY2V0IHZhbHVlcw0KICAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duTW9kZWwNCiAgICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93bk1vZGVsI3Byb2Nlc3NEYXRhDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICAgICAgICAgIHZhciBpbnN0ID0gdGhpcywNCiAgICAgICAgICAgICAgICAgICAgaGFzaE9iaiA9IHF1ZXJ5TW9kZWwucGFyc2VIYXNoUGFyYW1ldGVycyh3aW5kb3cubG9jYXRpb24uaGFzaCksDQogICAgICAgICAgICAgICAgICAgIHNpZyA9IGluc3QuZ2V0KCJzaWciKSwNCiAgICAgICAgICAgICAgICAgICAgZGF0YVByb3BlcnRpZXMgPSB0aGlzLmdldCgiZGF0YVByb3BlcnRpZXMiKSwNCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0c1NpZ25hdHVyZSA9IGRhdGFQcm9wZXJ0aWVzLnNlYXJjaFJlc3VsdHNTaWduYXR1cmUuc3BsaXQoJywnKSwNCiAgICAgICAgICAgICAgICAgICAgc29ydE9yZGVyID0gZGF0YVByb3BlcnRpZXMuc29ydE9yZGVyLA0KICAgICAgICAgICAgICAgICAgICBmYWNldCA9IGRhdGFQcm9wZXJ0aWVzLmYsDQogICAgICAgICAgICAgICAgICAgIGZhY2V0SXRlbSwNCiAgICAgICAgICAgICAgICAgICAgZmFjZWREYXRhLA0KICAgICAgICAgICAgICAgICAgICBpLCBqOw0KDQogICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHNlYXJjaFJlc3VsdHNTaWduYXR1cmUubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuRmFjZXRzLmxlbmd0aCA+IDAgJiYgKGRhdGEuU2lnbmF0dXJlID09PSBzZWFyY2hSZXN1bHRzU2lnbmF0dXJlW2pdKSB8fCBkYXRhLlNpZ25hdHVyZSA9PT0gIiIgfHwgZGF0YS5TaWduYXR1cmUgPT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2VkRGF0YSA9IF8uZmluZChkYXRhLkZhY2V0cywgZnVuY3Rpb24gKGYpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi5LZXkudG9Mb3dlckNhc2UoKSA9PT0gZmFjZXQudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmFjZWREYXRhID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzaWcubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWpRdWVyeS5pc0VtcHR5T2JqZWN0KF8ucGljayhoYXNoT2JqLCBzaWdbaV0pKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzaE9ialtzaWdbaV1dICE9PSAiIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRJdGVtID0gXy53aGVyZShmYWNlZERhdGEuVmFsdWVzLCB7IE5hbWU6IGhhc2hPYmpbc2lnW2ldXSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWNldEl0ZW0ubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRJdGVtID0gXy53aGVyZShmYWNlZERhdGEuVmFsdWVzLCB7IE5hbWU6ICIiIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhY2V0SXRlbS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRJdGVtWzBdLlNlbGVjdGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0Lm9wdGlvblNlbGVjdGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0RmFjZXRBcnJheShzb3J0T3JkZXIsIGZhY2VkRGF0YS5WYWx1ZXMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5zZXQoeyByZXN1bHREYXRhOiBmYWNlZERhdGEuVmFsdWVzIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICogU2V0cyBvcHRpb24gc2VsZWN0ZWQgdmFsdWUgdG8gbW9kZWwgYmFzZWQgb24gaGFzaA0KICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhhc2ggSGFzaCBzdG9yZWQgYXMgYW4gb2JqZWN0DQogICAgICAgICAgICAgKiBAbWVtYmVyb2YgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25Nb2RlbA0KICAgICAgICAgICAgICogQGFsaWFzIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duTW9kZWwjdXBkYXRlQ29tcG9uZW50DQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudDogZnVuY3Rpb24gKGhhc2gpIHsNCiAgICAgICAgICAgICAgICB2YXIgc2lnID0gdGhpcy5nZXQoInNpZyIpLCBpLCBmYWNldFBhcnQ7DQoNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2lnLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGZhY2V0UGFydCA9IHNpZ1tpXS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaGFzaC5oYXNPd25Qcm9wZXJ0eShmYWNldFBhcnQpICYmIGhhc2hbZmFjZXRQYXJ0XSAhPT0gIiIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KHsgb3B0aW9uU2VsZWN0ZWQ6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldCh7IG9wdGlvblNlbGVjdGVkOiBmYWxzZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgLyoqDQogICAgKiBAbmFtZSBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93blZpZXcNCiAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICogQGF1Z21lbnRzIEJhY2tib25lLlZpZXcNCiAgICAqLw0KICAgIHZhciBGYWNldERyb3Bkb3duVmlldyA9IFhBLmNvbXBvbmVudC5zZWFyY2guYmFzZVZpZXcuZXh0ZW5kKA0KICAgICAgICAvKiogQGxlbmRzIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duVmlldy5wcm90b3R5cGUgKiovDQoNCiAgICAgICAgew0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAqIEluaXRpYWxseSBzZXRzIGRhdGEgdG8gbW9kZWwgYW5kIHdhdGNoZXMgZXZlbnRzIG9uIHdoaWNoDQogICAgICAgICAgICAqIHZpZXcgc2hvdWxkIGJlIHVwZGF0ZWQNCiAgICAgICAgICAgICogQGxpc3RlbnMgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25Nb2RlbH5ldmVudDpjaGFuZ2UNCiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duVmlldw0KICAgICAgICAgICAgKiBAYWxpYXMgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25WaWV3I2luaXRpYWxpemUNCiAgICAgICAgICAgICovDQogICAgICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgdmFyIGRhdGFQcm9wZXJ0aWVzID0gdGhpcy4kZWwuZGF0YSgpOw0KICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllcyA9IGRhdGFQcm9wZXJ0aWVzLnByb3BlcnRpZXM7DQoNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlbCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnNldCh7IGRhdGFQcm9wZXJ0aWVzOiB0aGlzLnByb3BlcnRpZXMgfSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuc2V0KCJzaWciLCB0aGlzLnRyYW5zbGF0ZVNpZ25hdHVyZXModGhpcy5wcm9wZXJ0aWVzLnNlYXJjaFJlc3VsdHNTaWduYXR1cmUsIHRoaXMucHJvcGVydGllcy5mKSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5vbigiY2hhbmdlIiwgdGhpcy5yZW5kZXIsIHRoaXMpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICogbGlzdCBvZiBldmVudHMgZm9yIEJhY2tib25lIFZpZXcNCiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duVmlldw0KICAgICAgICAgICAgKiBAYWxpYXMgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25WaWV3I2V2ZW50cw0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBldmVudHM6IHsNCiAgICAgICAgICAgICAgICAiY2hhbmdlIC5mYWNldC1kcm9wZG93bi1zZWxlY3QiOiAidXBkYXRlRmFjZXQiLA0KICAgICAgICAgICAgICAgICJjbGljayAuYm90dG9tLXJlbW92ZS1maWx0ZXIsIC5jbGVhci1maWx0ZXIiOiAiY2xlYXJGaWx0ZXIiDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBDYWxjdWxhdGVzIHZhbHVlIG9mIG9wdGlvblNlbGVjdGVkIHZhbHVlIGluIG1vZGVsIGFuZCBjYWxscw0KICAgICAgICAgICAgICogWyJ1cGRhdGVTaWduYXR1cmVzSGFzaCJde0BsaW5rIG1vZHVsZSBkcm9wZG93bi5GYWNldERyb3Bkb3duVmlldyN1cGRhdGVTaWduYXR1cmVzSGFzaH0NCiAgICAgICAgICAgICAqIGluc2lkZSBvZiBbInVwZGF0ZUhhc2giXXtAbGluayBtb2R1bGU6c2VhcmNoUXVlcnkudXBkYXRlSGFzaH0NCiAgICAgICAgICAgICogQG1lbWJlcm9mIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duVmlldw0KICAgICAgICAgICAgKiBAYWxpYXMgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25WaWV3I3VwZGF0ZUZhY2V0DQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIHVwZGF0ZUZhY2V0OiBmdW5jdGlvbiAocGFyYW0pIHsNCiAgICAgICAgICAgICAgICB2YXIgJHNlbGVjdGVkT3B0aW9uID0gdGhpcy4kZWwuZmluZCgiLmZhY2V0LWRyb3Bkb3duLXNlbGVjdCIpLmZpbmQoIm9wdGlvbjpzZWxlY3RlZCIpLA0KICAgICAgICAgICAgICAgICAgICBmYWNldE5hbWUgPSBkZWNvZGVVUklDb21wb25lbnQoJHNlbGVjdGVkT3B0aW9uLmRhdGEoImZhY2V0bmFtZSIpKSwNCiAgICAgICAgICAgICAgICAgICAgc2lnID0gdGhpcy5tb2RlbC5nZXQoInNpZyIpOw0KDQogICAgICAgICAgICAgICAgaWYgKGZhY2V0TmFtZSA9PT0gIiIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5zZXQoeyBvcHRpb25TZWxlY3RlZDogZmFsc2UgfSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5zZXQoeyBvcHRpb25TZWxlY3RlZDogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcXVlcnlNb2RlbC51cGRhdGVIYXNoKHRoaXMudXBkYXRlU2lnbmF0dXJlc0hhc2goc2lnLCBmYWNldE5hbWUsIHt9KSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAqIFJlbmRlcnMgdmlldw0KICAgICAgICAgICAgKiBAbWVtYmVyb2YgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25WaWV3DQogICAgICAgICAgICAqIEBhbGlhcyBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93blZpZXcjcmVuZGVyDQogICAgICAgICAgICAqLw0KICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgdmFyIGluc3QgPSB0aGlzLA0KICAgICAgICAgICAgICAgICAgICByZXN1bHREYXRhID0gaW5zdC5tb2RlbC5nZXQoInJlc3VsdERhdGEiKSwNCiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24gPSB0aGlzLiRlbC5maW5kKCIuZmFjZXQtZHJvcGRvd24tc2VsZWN0IiksDQogICAgICAgICAgICAgICAgICAgIGVtcHR5VmFsdWVUZXh0ID0gaW5zdC5tb2RlbC5nZXQoJ2RhdGFQcm9wZXJ0aWVzJykuZW1wdHlWYWx1ZVRleHQsDQogICAgICAgICAgICAgICAgICAgIGZhY2V0Q2xvc2UgPSB0aGlzLiRlbC5maW5kKCIuZmFjZXQtaGVhZGluZyA+IHNwYW4iKSwNCiAgICAgICAgICAgICAgICAgICAgbm90U2VsZWN0ZWRPcHRpb24gPSBkcm9wZG93bi5maW5kKCJvcHRpb246Zmlyc3QiKSwNCiAgICAgICAgICAgICAgICAgICAgbm90U2VsZWN0ZWRPcHRpb25FbnRyeSA9ICQoIjxvcHRpb24gLz4iKSwNCiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUgPSBfLnRlbXBsYXRlKGluc3QubW9kZWwuZ2V0KCJ0ZW1wbGF0ZSIpKSwNCiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVSZXN1bHQgPSB0ZW1wbGF0ZSh7IHJlc3VsdHM6IHJlc3VsdERhdGEsIGVtcHR5VGV4dDogZW1wdHlWYWx1ZVRleHQgfSk7DQoNCiAgICAgICAgICAgICAgICB0aGlzLm1hbmFnZVZpc2liaWxpdHlCeURhdGEodGhpcy4kZWwsIHJlc3VsdERhdGEpDQogICAgICAgICAgICAgICAgbm90U2VsZWN0ZWRPcHRpb25FbnRyeS50ZXh0KG5vdFNlbGVjdGVkT3B0aW9uLnRleHQoKSk7DQogICAgICAgICAgICAgICAgbm90U2VsZWN0ZWRPcHRpb25FbnRyeS5kYXRhKCJmYWNldG5hbWUiLCAiIik7DQoNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlbC5nZXQoIm9wdGlvblNlbGVjdGVkIikpIHsNCiAgICAgICAgICAgICAgICAgICAgZmFjZXRDbG9zZS5hZGRDbGFzcygiaGFzLWFjdGl2ZS1mYWNldCIpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90U2VsZWN0ZWRPcHRpb24uZGF0YSgiZmFjZXRuYW1lIikgPT09ICIiKSB7DQogICAgICAgICAgICAgICAgICAgIGZhY2V0Q2xvc2UucmVtb3ZlQ2xhc3MoImhhcy1hY3RpdmUtZmFjZXQiKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBkcm9wZG93bi5lbXB0eSgpLmFwcGVuZChub3RTZWxlY3RlZE9wdGlvbkVudHJ5KS5hcHBlbmQodGVtcGxhdGVSZXN1bHQpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgKiBDbGVhcnMgc2VsZWN0ZWQgZmlsdGVycyBhbmQgdXBkYXRlcyBoYXNoIGJ5IGNhbGxpbmcNCiAgICAgICAgICAgICogWyJ1cGRhdGVIYXNoIl17QGxpbmsgbW9kdWxlOnNlYXJjaFF1ZXJ5LnVwZGF0ZUhhc2h9DQogICAgICAgICAgICAqIEBtZW1iZXJvZiBtb2R1bGU6ZHJvcGRvd24uRmFjZXREcm9wZG93blZpZXcNCiAgICAgICAgICAgICogQGFsaWFzIG1vZHVsZTpkcm9wZG93bi5GYWNldERyb3Bkb3duVmlldyNjbGVhckZpbHRlcg0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBjbGVhckZpbHRlcjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHZhciBkcm9wZG93biA9IHRoaXMuJGVsLmZpbmQoIi5mYWNldC1kcm9wZG93bi1zZWxlY3QiKSwNCiAgICAgICAgICAgICAgICAgICAgZmFjZXRDbG9zZSA9IHRoaXMuJGVsLmZpbmQoIi5mYWNldC1oZWFkaW5nID4gc3BhbiIpLA0KICAgICAgICAgICAgICAgICAgICBzaWcgPSB0aGlzLm1vZGVsLmdldCgic2lnIik7DQoNCiAgICAgICAgICAgICAgICBxdWVyeU1vZGVsLnVwZGF0ZUhhc2godGhpcy51cGRhdGVTaWduYXR1cmVzSGFzaChzaWcsICIiLCB7fSkpOw0KICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuc2V0KHsgb3B0aW9uU2VsZWN0ZWQ6IGZhbHNlIH0pOw0KICAgICAgICAgICAgICAgIGZhY2V0Q2xvc2UucmVtb3ZlQ2xhc3MoImhhcy1hY3RpdmUtZmFjZXQiKTsNCiAgICAgICAgICAgICAgICBkcm9wZG93bi52YWwoZHJvcGRvd24uZmluZCgib3B0aW9uOmZpcnN0IikudmFsKCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAvKioNCiAgICAqIEZvciBlYWNoIHNlYXJjaCBkcm9wZG93biBjb21wb25lbnQgb24gYSBwYWdlIGNyZWF0ZXMgaW5zdGFuY2Ugb2YNCiAgICAqIFsiRmFjZXREcm9wZG93bk1vZGVsIl17QGxpbmsgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25Nb2RlbH0gYW5kDQogICAgKiBbIkZhY2V0RHJvcGRvd25WaWV3Il17QGxpbmsgbW9kdWxlOmRyb3Bkb3duLkZhY2V0RHJvcGRvd25WaWV3fQ0KICAgICogQG1lbWJlck9mIG1vZHVsZTpkcm9wZG93bg0KICAgICogQGFsaWFzIG1vZHVsZTpkcm9wZG93bi5pbml0DQogICAgKi8NCg0KICAgIGFwaS5pbml0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoJCgiYm9keSIpLmhhc0NsYXNzKCJvbi1wYWdlLWVkaXRvciIpKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICBxdWVyeU1vZGVsID0gWEEuY29tcG9uZW50LnNlYXJjaC5xdWVyeTsNCiAgICAgICAgdXJsSGVscGVyTW9kZWwgPSBYQS5jb21wb25lbnQuc2VhcmNoLnVybDsNCg0KICAgICAgICB2YXIgZmFjZXREcm9wZG93bkxpc3QgPSAkKCIuZmFjZXQtZHJvcGRvd246bm90KC5pbml0aWFsaXplZCkiKTsNCg0KICAgICAgICBfLmVhY2goZmFjZXREcm9wZG93bkxpc3QsIGZ1bmN0aW9uIChlbGVtKSB7DQogICAgICAgICAgICB2YXIgJGVsID0gJChlbGVtKSwNCiAgICAgICAgICAgICAgICB2aWV3ID0gbmV3IEZhY2V0RHJvcGRvd25WaWV3KHsgZWw6ICRlbCwgbW9kZWw6IG5ldyBGYWNldERyb3Bkb3duTW9kZWwoKSB9KTsNCg0KICAgICAgICAgICAgJGVsLmFkZENsYXNzKCJpbml0aWFsaXplZCIpOw0KICAgICAgICB9KTsNCiAgICB9Ow0KICAgIC8qKg0KICAgICoNCiAgICAqIEBtZW1iZXJPZiBtb2R1bGU6ZHJvcGRvd24NCiAgICAqIEBhbGlhcyBtb2R1bGU6ZHJvcGRvd24uZ2V0RmFjZXREYXRhUmVxdWVzdEluZm8NCiAgICAqIEByZXR1cm5zIHtBcnJheTxGYWNldERhdGFSZXF1ZXN0SW5mbz59IGZhY2V0IGRhdGEgbmVlZGVkIGZvciByZXF1ZXN0DQogICAgKi8NCiAgICBhcGkuZ2V0RmFjZXREYXRhUmVxdWVzdEluZm8gPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBmYWNldERyb3Bkb3duTGlzdCA9ICQoIi5mYWNldC1kcm9wZG93biIpLA0KICAgICAgICAgICAgcmVzdWx0ID0gW107DQoNCiAgICAgICAgXy5lYWNoKGZhY2V0RHJvcGRvd25MaXN0LCBmdW5jdGlvbiAoZWxlbSkgew0KICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSAkKGVsZW0pLmRhdGEoKS5wcm9wZXJ0aWVzLA0KICAgICAgICAgICAgICAgIHNpZ25hdHVyZXMgPSBwcm9wZXJ0aWVzLnNlYXJjaFJlc3VsdHNTaWduYXR1cmUuc3BsaXQoJywnKSwNCiAgICAgICAgICAgICAgICBpOw0KDQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2lnbmF0dXJlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlOiBzaWduYXR1cmVzW2ldID09PSBudWxsID8gIiIgOiBzaWduYXR1cmVzW2ldLA0KICAgICAgICAgICAgICAgICAgICBmYWNldE5hbWU6IHByb3BlcnRpZXMuZiwNCiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6IHByb3BlcnRpZXMuZW5kcG9pbnQsDQogICAgICAgICAgICAgICAgICAgIGZpbHRlcldpdGhvdXRNZTogdHJ1ZQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgIH07DQoNCiAgICByZXR1cm4gYXBpOw0KDQp9KGpRdWVyeSwgZG9jdW1lbnQpKTsNCg0KWEEucmVnaXN0ZXIoImZhY2V0RHJvcGRvd24iLCBYQS5jb21wb25lbnQuc2VhcmNoLmZhY2V0LmRyb3Bkb3duKTs=
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 13061
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "ba3f86a2-4a1c-4d78-b63d-91c2779c1b5e"
  Hint: __Sortorder
  Value: 600
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160728T134136Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
